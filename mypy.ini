[mypy]
python_version = 3.11
warn_unused_configs = True

# Establish a permissive baseline for incremental typing.
# We can ratchet these tighter per-module over time.
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = False
warn_return_any = False

no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
strict_optional = True
ignore_missing_imports = True

# Exclude non-library code from baseline checks.
exclude = ^(tests/|scripts/|examples/|test_.*\.py)$

# Tests: loosen a couple of rules to enable gradual adoption.
[mypy-tests.*]
no_implicit_optional = False

# Incremental strictness ratchet: modules below must pass stricter rules.
[mypy-autorepro.__init__]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True

[mypy-autorepro.core.__init__]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True

[mypy-autorepro.render.__init__]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True

[mypy-autorepro.io.__init__]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True

[mypy-autorepro.config.__init__]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True

[mypy-autorepro.render.formats]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True

[mypy-autorepro.report]
disallow_untyped_defs = True
check_untyped_defs = True
warn_return_any = True
